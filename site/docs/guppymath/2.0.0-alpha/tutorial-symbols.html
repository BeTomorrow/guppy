<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tutorial: Creating custom symbols - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Doc.html">Doc</a><ul class='methods'><li data-type='method'><a href="Doc.html#.render">render</a></li><li data-type='method'><a href="Doc.html#.render_all">render_all</a></li><li data-type='method'><a href="Doc.html#get_content">get_content</a></li><li data-type='method'><a href="Doc.html#get_symbols">get_symbols</a></li><li data-type='method'><a href="Doc.html#is_blank">is_blank</a></li><li data-type='method'><a href="Doc.html#root">root</a></li><li data-type='method'><a href="Doc.html#set_content">set_content</a></li></ul></li><li><a href="Engine.html">Engine</a><ul class='methods'><li data-type='method'><a href="Engine.html#add_symbol">add_symbol</a></li><li data-type='method'><a href="Engine.html#backspace">backspace</a></li><li data-type='method'><a href="Engine.html#delete_key">delete_key</a></li><li data-type='method'><a href="Engine.html#done">done</a></li><li data-type='method'><a href="Engine.html#down">down</a></li><li data-type='method'><a href="Engine.html#end">end</a></li><li data-type='method'><a href="Engine.html#get_content">get_content</a></li><li data-type='method'><a href="Engine.html#home">home</a></li><li data-type='method'><a href="Engine.html#insert_string">insert_string</a></li><li data-type='method'><a href="Engine.html#insert_symbol">insert_symbol</a></li><li data-type='method'><a href="Engine.html#left">left</a></li><li data-type='method'><a href="Engine.html#list_extend">list_extend</a></li><li data-type='method'><a href="Engine.html#list_remove">list_remove</a></li><li data-type='method'><a href="Engine.html#list_remove_col">list_remove_col</a></li><li data-type='method'><a href="Engine.html#list_remove_row">list_remove_row</a></li><li data-type='method'><a href="Engine.html#list_vertical_move">list_vertical_move</a></li><li data-type='method'><a href="Engine.html#redo">redo</a></li><li data-type='method'><a href="Engine.html#remove_symbol">remove_symbol</a></li><li data-type='method'><a href="Engine.html#right">right</a></li><li data-type='method'><a href="Engine.html#sel_all">sel_all</a></li><li data-type='method'><a href="Engine.html#sel_clear">sel_clear</a></li><li data-type='method'><a href="Engine.html#sel_copy">sel_copy</a></li><li data-type='method'><a href="Engine.html#sel_cut">sel_cut</a></li><li data-type='method'><a href="Engine.html#sel_delete">sel_delete</a></li><li data-type='method'><a href="Engine.html#sel_left">sel_left</a></li><li data-type='method'><a href="Engine.html#sel_paste">sel_paste</a></li><li data-type='method'><a href="Engine.html#sel_right">sel_right</a></li><li data-type='method'><a href="Engine.html#set_content">set_content</a></li><li data-type='method'><a href="Engine.html#set_doc">set_doc</a></li><li data-type='method'><a href="Engine.html#spacebar">spacebar</a></li><li data-type='method'><a href="Engine.html#tab">tab</a></li><li data-type='method'><a href="Engine.html#undo">undo</a></li><li data-type='method'><a href="Engine.html#up">up</a></li></ul></li><li><a href="Guppy.html">Guppy</a><ul class='methods'><li data-type='method'><a href="Guppy.html#.add_global_symbol">add_global_symbol</a></li><li data-type='method'><a href="Guppy.html#.init">init</a></li><li data-type='method'><a href="Guppy.html#.remove_global_symbol">remove_global_symbol</a></li><li data-type='method'><a href="Guppy.html#activate">activate</a></li><li data-type='method'><a href="Guppy.html#asciimath">asciimath</a></li><li data-type='method'><a href="Guppy.html#deactivate">deactivate</a></li><li data-type='method'><a href="Guppy.html#doc">doc</a></li><li data-type='method'><a href="Guppy.html#equations">equations</a></li><li data-type='method'><a href="Guppy.html#evaluate">evaluate</a></li><li data-type='method'><a href="Guppy.html#func">func</a></li><li data-type='method'><a href="Guppy.html#import_syntax_tree">import_syntax_tree</a></li><li data-type='method'><a href="Guppy.html#import_text">import_text</a></li><li data-type='method'><a href="Guppy.html#import_xml">import_xml</a></li><li data-type='method'><a href="Guppy.html#latex">latex</a></li><li data-type='method'><a href="Guppy.html#render">render</a></li><li data-type='method'><a href="Guppy.html#symbols_used">symbols_used</a></li><li data-type='method'><a href="Guppy.html#syntax_tree">syntax_tree</a></li><li data-type='method'><a href="Guppy.html#text">text</a></li><li data-type='method'><a href="Guppy.html#vars">vars</a></li><li data-type='method'><a href="Guppy.html#xml">xml</a></li></ul></li><li><a href="GuppyOSK.html">GuppyOSK</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-format.html">XML format</a></li><li><a href="tutorial-internals.html">Editor internals</a></li><li><a href="tutorial-roadmap.html">Roadmap for future development</a></li><li><a href="tutorial-style.html">Styling the editor</a></li><li><a href="tutorial-symbols.html">Creating custom symbols</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Tutorial: Creating custom symbols</h1>
    

    <section>

<header>
    

    <h2>Creating custom symbols</h2>
</header>

<article>
    <h2>Symbol definition reference</h2><p><code>symbols.json</code> is a dictionary whose keys are the symbol names
(i.e. the strings that will get auto-replaced by the symbol in the
editor) and whose values are dictionaries with the following keys:</p>
<ul>
<li><p><code>output</code>: A dictionary with keys <code>latex</code>, <code>text</code>, and an optional
<code>small_latex</code>.  The values are strings which will comprise the
LaTeX, ASCII, or small LaTeX (respectively) representations of the
symbol.  A symbol may have editable components, the ith of which is
represented by <code>{$i}</code> appearing in the string.  For example, the
LaTeX representation of the <code>sqrt</code> symbol is <code>&quot;\\sqrt{{$1}}&quot;</code>,
indicating that it has one editable component, namely the inside of
the square root.</p>
<ul>
<li><p>If the ith entry is intended to be an array, with commas rendered
between elements of the array, then that entry should be
represented by <code>{$i{,}}</code>.  See the <code>vec</code> symbol in
<a href="https://github.com/daniel3735928559/guppy/blob/master/sym/extra_symbols.json">/sym/extra_symbols.json</a>
for an example of this.</p>
</li>
<li><p>If the ith entry is intended to be a 2D array, with, say, commas
separating elements of each row and semicolons separating columns,
then that entry is represented by <code>{$i{,}{;}}</code>.  See the <code>mx</code>
symbol in
<a href="https://github.com/daniel3735928559/guppy/blob/master/sym/extra_symbols.json">/sym/extra_symbols.json</a>
for an example of this.</p>
</li>
</ul>
</li>
<li><p><code>type</code>: A string name for the symbol (will appear in the XML and can
used for searching).</p>
</li>
<li><p><code>group</code>: A string group name for the symbol (will be used to group
symbols in button interface).</p>
</li>
<li><p><code>current</code>: If this is non-zero, then if the symbol is inserted while
something is selected, then that selection will become this
component of the symbol.  For example, if the current state is
<code>x+1+2</code> and you select <code>x+1</code> and press <code>^</code>, then because the
exponent symbol has <code>&quot;current&quot;:1</code>, the selection will become
component 1 of the exponent (i.e. the base) and you will get
<code>(x+1)^{}+2</code>.</p>
</li>
<li><p>[optional] <code>current_type</code>: If this is <code>&quot;token&quot;</code> and current is
non-zero, then when the symbol is inserted, the first token to the
left of the cursor when the symbol is inserted will become the
component specified in <code>current</code>.  For example, the exponent symbol
has <code>&quot;current&quot;:1,&quot;current_type&quot;:&quot;token&quot;</code>, so if the current state of
the editor is <code>pi+sin(x)</code> and the cursor is just after the pi, then
if <code>^</code> is pressed, the state will become <code>{pi}^{}+sin(x)</code>.  </p>
</li>
<li><p>[optional] <code>attrs</code>: This is an array of dictionaries describing the
XML attributes that will be given to each of the symbol's editable
components.  Each key/value pair in the ith dictionary in this array
will be set as an attribute name/value pair on the ith editable
component.  For example, if the <code>attrs</code> list has first entry
<code>{&quot;small&quot;:&quot;yes&quot;}</code>, then the first component will get a &quot;small&quot;
attribute with value &quot;yes&quot;.  You can include whatever attribute
names you want, but the following names are treated specially in
Guppy if they are present:</p>
<ul>
<li><p><code>mode</code>: This should be set to &quot;text&quot; for any components that
should be rendered as text (rather than in math mode).  </p>
</li>
<li><p><code>up</code>: Which component to jump to when the up arrow key is pressed
(or 0 for the default behaviour).  For example, in a definite
integral, we want the up arrow key to take us from the integrand
or the variable of integration directly to the upper limit.  Since
the upper limit of integration is component 2, we use
<code>&quot;up&quot;:[2,2,2,2]</code>.</p>
</li>
<li><p><code>down</code>: Which component to jump to when the down arrow key is
pressed (or 0 for the default behaviour).</p>
</li>
<li><p><code>delete</code>: The index of which component should be used to replace
the entire symbol if the backspace key is pressed when the cursor
is at the start of this component.  If 0 or absent, then the
default backspace behaviour will be used (namely, that it behaves
like the left arrow when at the start of any component except the
first, where it deletes the entire symbol).  For example, in an
exponent such as <code>x^2</code>, we want a backspace from just before the 2
to delete just the exponent, leaving the base.  That is, we want
component number 1 to be left.  However, if backspace is used in
the base, we want the default behaviour.  So we use
<code>&quot;delete&quot;:[0,1]</code> to get the default behaviour in the first
component, and deleting the second component to leave us with the
first only.  </p>
</li>
<li><p><code>bracket</code>: If <code>bracket</code> is <code>&quot;yes&quot;</code>, then this component will be
surrounded in parentheses if it contains more than one character
in it.  For example, the first component of an exponent has
<code>bracket=&quot;yes&quot;</code>, so will render as <code>x^{y}</code> if the first component is
<code>x</code> and the second <code>y</code>, but will render as <code>(x+1)^{y+2}</code> if the first
component is <code>x+1</code> and the second <code>y+2</code>.  </p>
</li>
<li><p><code>small</code>: If <code>small</code> is <code>&quot;yes&quot;</code>, then when rendering to LaTeX,
anything in this component (or any descendant) will be rendered
using its <code>small_latex</code> output mode if available.  For example,
the exponent symbol has <code>attrs[1] = {&quot;small&quot;:&quot;yes&quot;,...}</code>, so the
second component (the thing in the exponent) is marked as being
small.  Thus, for instance, fractions and integrals (to name two)
that appear inside that exponent will not render at their normal,
large size.</p>
</li>
</ul>
</li>
</ul>
<p>The following symbol names are treated specially:</p>
<ul>
<li><p><code>_raw</code>: The value under this key should be an array of objects with keys:</p>
<ul>
<li><p><code>group</code>: The string name of the group</p>
</li>
<li><p><code>symbols</code>: An array of objects with keys:</p>
<ul>
<li><p><code>name</code>: The name of the symbol (the string used to enter it)</p>
</li>
<li><p><code>latex</code>: The LaTeX rendering of the symbol</p>
</li>
<li><p><code>text</code>: The text rendering of the symbol</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>_func</code>: The value under this key should be an array of objects with keys:</p>
<ul>
<li><p><code>group</code>: The string name of the group</p>
</li>
<li><p><code>symbols</code>: An array of string names of the functions (which will
take a single argument and whose latex rendering will be
<code>\name(&lt;argument&gt;)</code> and text rendering will be <code>name(&lt;argument&gt;)</code>.  </p>
</li>
</ul>
</li>
<li><p><code>_literal</code>: The value under this key should be an array of objects with keys:</p>
<ul>
<li><p><code>group</code>: The string name of the group</p>
</li>
<li><p><code>symbols</code>: An array of string names of the functions (which will
take a single argument and whose latex rendering will be
<code>\name</code> and text rendering will be <code>$name</code>.  </p>
</li>
</ul>
</li>
</ul>
</article>

</section>

</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Dec 29 2017 21:36:37 GMT+0000 (UTC) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>